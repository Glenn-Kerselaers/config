[mcu pico]
serial: /dev/serial/by-id/usb-Klipper_rp2040_E66038B71352B733-if00

[adxl345]
cs_pin: pico:gpio1
spi_bus: spi0a

[static_digital_output pico_3V3pwm] # Improve power stability
pin: pico:gpio23

[resonance_tester]
accel_chip: adxl345
probe_points:
    117.5, 117.5, 20

[gcode_shell_command plot_graph]
command: bash /home/pi/printer_data/config/script/plot_graphs.sh
timeout: 300.0
verbose: True

[gcode_macro ADXL_CONNECT]
gcode:
    ACCELEROMETER_QUERY
    ACCELEROMETER_QUERY
    MEASURE_AXES_NOISE
    _UserDebug msg="ADXL_CONNECT done."

[gcode_macro AXES_SHAPER_CALIBRATION_X]
description: Run standard input shaper test for all axes
gcode:
    CG28
    TEST_RESONANCES AXIS=X
    M400
    _UserDebug msg="AXES_SHAPER_CALIBRATION_X done."

[gcode_macro AXES_SHAPER_CALIBRATION_Y]
description: Run standard input shaper test for all axes
gcode:
    CG28
    TEST_RESONANCES AXIS=Y
    M400
    _UserDebug msg="AXES_SHAPER_CALIBRATION_Y done."

[gcode_macro AXES_SHAPER_CALIBRATION]
description: Run standard input shaper test for all axes
gcode:
    _UserDebug msg="Graphs generation... Please wait a minute or two and look in the configured folder."
    RUN_SHELL_COMMAND CMD=plot_graph PARAMS=SHAPER
    _UserDebug msg="AXES_SHAPER_CALIBRATION done."